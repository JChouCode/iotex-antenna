"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Iotx = void 0;

var _accounts = require("./account/accounts");

var _method = require("./action/method");

var _contract = require("./contract/contract");

var _rpcMethod = _interopRequireDefault(require("./rpc-method"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}

class Iotx extends _rpcMethod.default {
  constructor(hostname, opts) {
    super(hostname);

    _defineProperty(this, "accounts", void 0);

    _defineProperty(this, "signer", void 0);

    this.accounts = new _accounts.Accounts(this);
    this.signer = opts && opts.signer;
  }

  async tryGetAccount(address) {
    const sender =
      this.signer && this.signer.getAccount
        ? await this.signer.getAccount(address)
        : this.accounts.getAccount(address);

    if (!sender) {
      throw new Error(`cannot find account: ${address}`);
    }

    return sender;
  }

  currentProvider() {
    return this.client;
  }

  async sendTransfer(req) {
    const sender = await this.tryGetAccount(req.from);
    const payload = req.payload || "";
    return new _method.TransferMethod(
      this,
      sender,
      {
        gasLimit: req.gasLimit,
        gasPrice: req.gasPrice,
        amount: req.value,
        recipient: req.to,
        payload: payload
      },
      {
        signer: this.signer
      }
    ).execute();
  } // return action hash

  async deployContract(req, ...args) {
    const sender = await this.tryGetAccount(req.from);
    return new _contract.Contract(JSON.parse(req.abi), undefined, {
      data: req.data,
      provider: this,
      signer: this.signer
    }).deploy(sender, args, req.gasLimit, req.gasPrice);
  } // return action hash

  async executeContract(req, ...args) {
    const sender = await this.tryGetAccount(req.from);
    const contract = new _contract.Contract(
      JSON.parse(req.abi),
      req.contractAddress,
      {
        provider: this,
        signer: this.signer
      }
    );
    return contract.methods[req.method](...args, {
      account: sender,
      amount: req.amount,
      gasLimit: req.gasLimit,
      gasPrice: req.gasPrice
    });
  }

  async readContractByMethod(req, ...args) {
    const contract = new _contract.Contract(
      JSON.parse(req.abi),
      req.contractAddress,
      {
        provider: this,
        signer: this.signer
      }
    );
    const result = await this.readContract({
      execution: contract.pureEncodeMethod("0", req.method, ...args),
      callerAddress: req.from
    });
    return contract.decodeMethodResult(req.method, result.data);
  }

  async claimFromRewardingFund(req) {
    const sender = await this.tryGetAccount(req.from);
    return new _method.ClaimFromRewardingFundMethod(
      this,
      sender,
      {
        gasLimit: req.gasLimit,
        gasPrice: req.gasPrice,
        amount: req.amount,
        data: req.data
      },
      {
        signer: this.signer
      }
    ).execute();
  }
}

exports.Iotx = Iotx;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pb3R4LnRzIl0sIm5hbWVzIjpbIklvdHgiLCJScGNNZXRob2QiLCJjb25zdHJ1Y3RvciIsImhvc3RuYW1lIiwib3B0cyIsImFjY291bnRzIiwiQWNjb3VudHMiLCJzaWduZXIiLCJ0cnlHZXRBY2NvdW50IiwiYWRkcmVzcyIsInNlbmRlciIsImdldEFjY291bnQiLCJFcnJvciIsImN1cnJlbnRQcm92aWRlciIsImNsaWVudCIsInNlbmRUcmFuc2ZlciIsInJlcSIsImZyb20iLCJwYXlsb2FkIiwiVHJhbnNmZXJNZXRob2QiLCJnYXNMaW1pdCIsImdhc1ByaWNlIiwiYW1vdW50IiwidmFsdWUiLCJyZWNpcGllbnQiLCJ0byIsImV4ZWN1dGUiLCJkZXBsb3lDb250cmFjdCIsImFyZ3MiLCJDb250cmFjdCIsIkpTT04iLCJwYXJzZSIsImFiaSIsInVuZGVmaW5lZCIsImRhdGEiLCJwcm92aWRlciIsImRlcGxveSIsImV4ZWN1dGVDb250cmFjdCIsImNvbnRyYWN0IiwiY29udHJhY3RBZGRyZXNzIiwibWV0aG9kcyIsIm1ldGhvZCIsImFjY291bnQiLCJyZWFkQ29udHJhY3RCeU1ldGhvZCIsInJlc3VsdCIsInJlYWRDb250cmFjdCIsImV4ZWN1dGlvbiIsInB1cmVFbmNvZGVNZXRob2QiLCJjYWxsZXJBZGRyZXNzIiwiZGVjb2RlTWV0aG9kUmVzdWx0IiwiY2xhaW1Gcm9tUmV3YXJkaW5nRnVuZCIsIkNsYWltRnJvbVJld2FyZGluZ0Z1bmRNZXRob2QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFLQTs7QUFDQTs7Ozs7O0FBV08sTUFBTUEsSUFBTixTQUFtQkMsa0JBQW5CLENBQTZCO0FBSWxDQyxFQUFBQSxXQUFXLENBQUNDLFFBQUQsRUFBbUJDLElBQW5CLEVBQW9DO0FBQzdDLFVBQU1ELFFBQU47O0FBRDZDOztBQUFBOztBQUU3QyxTQUFLRSxRQUFMLEdBQWdCLElBQUlDLGtCQUFKLENBQWMsSUFBZCxDQUFoQjtBQUNBLFNB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QUcsQ0FBQ2tCO0FBSlosS0FISyxFQVNMO0FBQUUzQixNQUFBQSxNQUFNLEVBQUUsS0FBS0E7QUFBZixLQVRLLEVBVUxtQixPQVZLLEVBQVA7QUFXRDs7QUE1R2lDIiwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6bm8tYW55ICovXG5pbXBvcnQgeyBBY2NvdW50IH0gZnJvbSBcIi4vYWNjb3VudC9hY2NvdW50XCI7XG5pbXBvcnQgeyBBY2NvdW50cyB9IGZyb20gXCIuL2FjY291bnQvYWNjb3VudHNcIjtcbmltcG9ydCB7XG4gIENsYWltRnJvbVJld2FyZGluZ0Z1bmRNZXRob2QsXG4gIFNpZ25lclBsdWdpbixcbiAgVHJhbnNmZXJNZXRob2Rcbn0gZnJvbSBcIi4vYWN0aW9uL21ldGhvZFwiO1xuaW1wb3J0IHsgQ29udHJhY3QgfSBmcm9tIFwiLi9jb250cmFjdC9jb250cmFjdFwiO1xuaW1wb3J0IFJwY01ldGhvZCBmcm9tIFwiLi9ycGMtbWV0aG9kXCI7XG5pbXBvcnQgeyBJUnBjTWV0aG9kIH0gZnJvbSBcIi4vcnBjLW1ldGhvZC90eXBlc1wiO1xuaW1wb3J0IHtcbiAgQ2xhaW1Gcm9tUmV3YXJkaW5nRnVuZFJlcXVzZXQsXG4gIENvbnRyYWN0UmVxdWVzdCxcbiAgRXhlY3V0ZUNvbnRyYWN0UmVxdWVzdCxcbiAgVHJhbnNmZXJSZXF1ZXN0XG59IGZyb20gXCIuL3R5cGVzXCI7XG5cbnR5cGUgSW90eE9wdHMgPSB7IHNpZ25lcj86IFNpZ25lclBsdWdpbiB9O1xuXG5leHBvcnQgY2xhc3MgSW90eCBleHRlbmRzIFJwY01ldGhvZCB7XG4gIHB1YmxpYyBhY2NvdW50czogQWNjb3VudHM7XG4gIHB1YmxpYyBzaWduZXI/OiBTaWduZXJQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoaG9zdG5hbWU6IHN0cmluZywgb3B0cz86IElvdHhPcHRzKSB7XG4gICAgc3VwZXIoaG9zdG5hbWUpO1xuICAgIHRoaXMuYWNjb3VudHMgPSBuZXcgQWNjb3VudHMoKHRoaXMgYXMgYW55KSBhcyBJUnBjTWV0aG9kKTtcbiAgICB0aGlzLnNpZ25lciA9IG9wdHMgJiYgb3B0cy5zaWduZXI7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdHJ5R2V0QWNjb3VudChhZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPEFjY291bnQ+IHtcbiAgICBjb25zdCBzZW5kZXIgPVxuICAgICAgdGhpcy5zaWduZXIgJiYgdGhpcy5zaWduZXIuZ2V0QWNjb3VudFxuICAgICAgICA/IGF3YWl0IHRoaXMuc2lnbmVyLmdldEFjY291bnQoYWRkcmVzcylcbiAgICAgICAgOiB0aGlzLmFjY291bnRzLmdldEFjY291bnQoYWRkcmVzcyk7XG4gICAgaWYgKCFzZW5kZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IGZpbmQgYWNjb3VudDogJHthZGRyZXNzfWApO1xuICAgIH1cbiAgICByZXR1cm4gc2VuZGVyO1xuICB9XG5cbiAgcHVibGljIGN1cnJlbnRQcm92aWRlcigpOiBJUnBjTWV0aG9kIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnQ7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2VuZFRyYW5zZmVyKHJlcTogVHJhbnNmZXJSZXF1ZXN0KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBzZW5kZXIgPSBhd2FpdCB0aGlzLnRyeUdldEFjY291bnQocmVxLmZyb20pO1xuICAgIGNvbnN0IHBheWxvYWQgPSByZXEucGF5bG9hZCB8fCBcIlwiO1xuICAgIHJldHVybiBuZXcgVHJhbnNmZXJNZXRob2QoXG4gICAgICB0aGlzLFxuICAgICAgc2VuZGVyLFxuICAgICAge1xuICAgICAgICBnYXNMaW1pdDogcmVxLmdhc0xpbWl0LFxuICAgICAgICBnYXNQcmljZTogcmVxLmdhc1ByaWNlLFxuICAgICAgICBhbW91bnQ6IHJlcS52YWx1ZSxcbiAgICAgICAgcmVjaXBpZW50OiByZXEudG8sXG4gICAgICAgIHBheWxvYWQ6IHBheWxvYWRcbiAgICAgIH0sXG4gICAgICB7IHNpZ25lcjogdGhpcy5zaWduZXIgfVxuICAgICkuZXhlY3V0ZSgpO1xuICB9XG5cbiAgLy8gcmV0dXJuIGFjdGlvbiBoYXNoXG4gIHB1YmxpYyBhc3luYyBkZXBsb3lDb250cmFjdChcbiAgICByZXE6IENvbnRyYWN0UmVxdWVzdCxcbiAgICAuLi5hcmdzOiBBcnJheTxhbnk+XG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3Qgc2VuZGVyID0gYXdhaXQgdGhpcy50cnlHZXRBY2NvdW50KHJlcS5mcm9tKTtcblxuICAgIHJldHVybiBuZXcgQ29udHJhY3QoSlNPTi5wYXJzZShyZXEuYWJpKSwgdW5kZWZpbmVkLCB7XG4gICAgICBkYXRhOiByZXEuZGF0YSxcbiAgICAgIHByb3ZpZGVyOiB0aGlzLFxuICAgICAgc2lnbmVyOiB0aGlzLnNpZ25lclxuICAgIH0pLmRlcGxveShzZW5kZXIsIGFyZ3MsIHJlcS5nYXNMaW1pdCwgcmVxLmdhc1ByaWNlKTtcbiAgfVxuXG4gIC8vIHJldHVybiBhY3Rpb24gaGFzaFxuICBwdWJsaWMgYXN5bmMgZXhlY3V0ZUNvbnRyYWN0KFxuICAgIHJlcTogRXhlY3V0ZUNvbnRyYWN0UmVxdWVzdCxcbiAgICAuLi5hcmdzOiBBcnJheTxhbnk+XG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3Qgc2VuZGVyID0gYXdhaXQgdGhpcy50cnlHZXRBY2NvdW50KHJlcS5mcm9tKTtcblxuICAgIGNvbnN0IGNvbnRyYWN0ID0gbmV3IENvbnRyYWN0KEpTT04ucGFyc2UocmVxLmFiaSksIHJlcS5jb250cmFjdEFkZHJlc3MsIHtcbiAgICAgIHByb3ZpZGVyOiB0aGlzLFxuICAgICAgc2lnbmVyOiB0aGlzLnNpZ25lclxuICAgIH0pO1xuICAgIHJldHVybiBjb250cmFjdC5tZXRob2RzW3JlcS5tZXRob2RdKC4uLmFyZ3MsIHtcbiAgICAgIGFjY291bnQ6IHNlbmRlcixcbiAgICAgIGFtb3VudDogcmVxLmFtb3VudCxcbiAgICAgIGdhc0xpbWl0OiByZXEuZ2FzTGltaXQsXG4gICAgICBnYXNQcmljZTogcmVxLmdhc1ByaWNlXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcmVhZENvbnRyYWN0QnlNZXRob2QoXG4gICAgcmVxOiBFeGVjdXRlQ29udHJhY3RSZXF1ZXN0LFxuICAgIC4uLmFyZ3M6IEFycmF5PGFueT5cbiAgKTogUHJvbWlzZTxhbnkgfCBBcnJheTxhbnk+PiB7XG4gICAgY29uc3QgY29udHJhY3QgPSBuZXcgQ29udHJhY3QoSlNPTi5wYXJzZShyZXEuYWJpKSwgcmVxLmNvbnRyYWN0QWRkcmVzcywge1xuICAgICAgcHJvdmlkZXI6IHRoaXMsXG4gICAgICBzaWduZXI6IHRoaXMuc2lnbmVyXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlYWRDb250cmFjdCh7XG4gICAgICBleGVjdXRpb246IGNvbnRyYWN0LnB1cmVFbmNvZGVNZXRob2QoXCIwXCIsIHJlcS5tZXRob2QsIC4uLmFyZ3MpLFxuICAgICAgY2FsbGVyQWRkcmVzczogcmVxLmZyb21cbiAgICB9KTtcblxuICAgIHJldHVybiBjb250cmFjdC5kZWNvZGVNZXRob2RSZXN1bHQocmVxLm1ldGhvZCwgcmVzdWx0LmRhdGEpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGNsYWltRnJvbVJld2FyZGluZ0Z1bmQoXG4gICAgcmVxOiBDbGFpbUZyb21SZXdhcmRpbmdGdW5kUmVxdXNldFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHNlbmRlciA9IGF3YWl0IHRoaXMudHJ5R2V0QWNjb3VudChyZXEuZnJvbSk7XG5cbiAgICByZXR1cm4gbmV3IENsYWltRnJvbVJld2FyZGluZ0Z1bmRNZXRob2QoXG4gICAgICB0aGlzLFxuICAgICAgc2VuZGVyLFxuICAgICAge1xuICAgICAgICBnYXNMaW1pdDogcmVxLmdhc0xpbWl0LFxuICAgICAgICBnYXNQcmljZTogcmVxLmdhc1ByaWNlLFxuICAgICAgICBhbW91bnQ6IHJlcS5hbW91bnQsXG4gICAgICAgIGRhdGE6IHJlcS5kYXRhXG4gICAgICB9LFxuICAgICAgeyBzaWduZXI6IHRoaXMuc2lnbmVyIH1cbiAgICApLmV4ZWN1dGUoKTtcbiAgfVxufVxuIl19
