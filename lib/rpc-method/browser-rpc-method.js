"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _api_grpc_web_pb = _interopRequireDefault(
  require("../../protogen/proto/api/api_grpc_web_pb")
);

var _types = require("./types");

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}

class RpcMethod {
  constructor(hostname, options = {}) {
    _defineProperty(this, "client", void 0);

    _defineProperty(this, "timeout", void 0);

    this.client = new _api_grpc_web_pb.default.APIServicePromiseClient(
      hostname,
      null,
      null
    );
    this.timeout = options.timeout || 300000;
  }

  setProvider(provider) {
    if (typeof provider === "string") {
      this.client = new _api_grpc_web_pb.default.APIServicePromiseClient(
        provider,
        null,
        null
      );
    } else {
      const origin = provider;
      this.client = origin.client;
    }
  }

  getDeadline() {
    return `${new Date(Date.now() + this.timeout).getTime()}`;
  }

  async getAccount(req) {
    const pbReq = _types.GetAccountRequest.to(req);

    const pbResp = await this.client.getAccount(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.GetAccountRequest.from(pbResp);
  }

  async getBlockMetas(req) {
    const pbReq = _types.GetBlockMetasRequest.to(req);

    const pbResp = await this.client.getBlockMetas(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.GetBlockMetasRequest.from(pbResp);
  }

  async getChainMeta(req) {
    const pbReq = _types.GetChainMetaRequest.to(req);

    const pbResp = await this.client.getChainMeta(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.GetChainMetaRequest.from(pbResp);
  }

  async getServerMeta(req) {
    const pbReq = _types.GetServerMetaRequest.to(req);

    const pbResp = await this.client.getServerMeta(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.GetServerMetaRequest.from(pbResp);
  }

  async getActions(req) {
    const pbReq = _types.GetActionsRequest.to(req);

    const pbResp = await this.client.getActions(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.GetActionsRequest.from(pbResp);
  }

  async suggestGasPrice(req) {
    const pbReq = _types.SuggestGasPriceRequest.to(req);

    const pbResp = await this.client.suggestGasPrice(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.SuggestGasPriceRequest.from(pbResp);
  }

  async estimateGasForAction(req) {
    const pbReq = _types.EstimateGasForActionRequest.to(req);

    const pbResp = await this.client.estimateGasForAction(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.EstimateGasForActionRequest.from(pbResp);
  }

  async readState(req) {
    const pbReq = _types.ReadStateRequest.to(req);

    const pbResp = await this.client.readState(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.ReadStateRequest.from(pbResp);
  }

  async readContract(req) {
    const pbReq = _types.ReadContractRequest.to(req);

    const pbResp = await this.client.readContract(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.ReadContractRequest.from(pbResp);
  }

  async sendAction(req) {
    const pbReq = _types.SendActionRequest.to(req);

    const pbResp = await this.client.sendAction(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.SendActionResponse.from(pbResp);
  }

  async getReceiptByAction(req) {
    const pbReq = _types.GetReceiptByActionRequest.to(req);

    const pbResp = await this.client.getReceiptByAction(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.GetReceiptByActionRequest.from(pbResp);
  }

  async getEpochMeta(req) {
    const pbReq = _types.GetEpochMetaRequest.to(req);

    const pbResp = await this.client.getEpochMeta(pbReq, {
      deadline: this.getDeadline()
    });
    return _types.GetEpochMetaRequest.from(pbResp);
  }
}

exports.default = RpcMethod;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ycGMtbWV0aG9kL2Jyb3dzZXItcnBjLW1ldGhvZC50cyJdLCJuYW1lcyI6WyJScGNNZXRob2QiLCJjb25zdHJ1Y3RvciIsImhvc3RuYW1lIiwib3B0aW9ucyIsImNsaWVudCIsImdycGNXZWIiLCJBUElTZXJ2aWNlUHJvbWlzZUNsaWVudCIsInRpbWVvdXQiLCJzZXRQcm92aWRlciIsInByb3ZpZGVyIiwib3JpZ2luIiwiZ2V0RGVhZGxpbmUiLCJEYXRlIiwibm93IiwiZ2V0VGltZSIsImdldEFjY291bnQiLCJyZXEiLCJwYlJlcSIsIkdldEFjY291bnRSZXF1ZXN0IiwidG8iLCJwYlJlc3AiLCJkZWFkbGluZSIsImZyb20iLCJnZXRCbG9ja01ldGFzIiwiR2V0QmxvY2tNZXRhc1JlcXVlc3QiLCJnZXRDaGFpbk1ldGEiLCJHZXRDaGFpbk1ldGFSZXF1ZXN0IiwiZ2V0U2VydmVyTWV0YSIsIkdldFNlcnZlck1ldGFSZXF1ZXN0IiwiZ2V0QWN0aW9ucyIsIkdldEFjdGlvbnNSZXF1ZXN0Iiwic3VnZ2VzdEdhc1ByaWNlIiwiU3VnZ2VzdEdhc1ByaWNlUmVxdWVzdCIsImVzdGltYXRlR2FzRm9yQWN0aW9uIiwiRXN0aW1hdGVHYXNGb3JBY3Rpb25SZXF1ZXN0IiwicmVhZFN0YXRlIiwiUmVhZFN0YXRlUmVxdWVzdCIsInJlYWRDb250cmFjdCIsIlJlYWRDb250cmFjdFJlcXVlc3QiLCJzZW5kQWN0aW9uIiwiU2VuZEFjdGlvblJlcXVlc3QiLCJTZW5kQWN0aW9uUmVzcG9uc2UiLCJnZXRSZWNlaXB0QnlBY3Rpb24iLCJHZXRSZWNlaXB0QnlBY3Rpb25SZXF1ZXN0IiwiZ2V0RXBvY2hNZXRhIiwiR2V0RXBvY2hNZXRhUmVxdWVzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFnRGUsTUFBTUEsU0FBTixDQUFzQztBQUluREMsRUFBQUEsV0FBVyxDQUFDQyxRQUFELEVBQW1CQyxPQUFhLEdBQUcsRUFBbkMsRUFBdUM7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LFdBQUw7QUFEeUMsS0FBaEMsQ0FBckI7QUFHQSxXQUFPa0MsMkJBQW9CdkIsSUFBcEIsQ0FBeUJGLE1BQXpCLENBQVA7QUFDRDs7QUExSWtEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdycGNXZWIgZnJvbSBcIi4uLy4uL3Byb3RvZ2VuL3Byb3RvL2FwaS9hcGlfZ3JwY193ZWJfcGJcIjtcbmltcG9ydCB7XG4gIEdldFNlcnZlck1ldGFSZXF1ZXN0LFxuICBJRXN0aW1hdGVHYXNGb3JBY3Rpb25SZXF1ZXN0LFxuICBJRXN0aW1hdGVHYXNGb3JBY3Rpb25SZXNwb25zZSxcbiAgSUdldEFjY291bnRSZXF1ZXN0LFxuICBJR2V0QWNjb3VudFJlc3BvbnNlLFxuICBJR2V0QWN0aW9uc1JlcXVlc3QsXG4gIElHZXRBY3Rpb25zUmVzcG9uc2UsXG4gIElHZXRCbG9ja01ldGFzUmVxdWVzdCxcbiAgSUdldEJsb2NrTWV0YXNSZXNwb25zZSxcbiAgSUdldENoYWluTWV0YVJlcXVlc3QsXG4gIElHZXRDaGFpbk1ldGFSZXNwb25zZSxcbiAgSUdldEVwb2NoTWV0YVJlcXVlc3QsXG4gIElHZXRFcG9jaE1ldGFSZXNwb25zZSxcbiAgSUdldFJlY2VpcHRCeUFjdGlvblJlcXVlc3QsXG4gIElHZXRSZWNlaXB0QnlBY3Rpb25SZXNwb25zZSxcbiAgSUdldFNlcnZlck1ldGFSZXF1ZXN0LFxuICBJR2V0U2VydmVyTWV0YVJlc3BvbnNlLFxuICBJUmVhZENvbnRyYWN0UmVxdWVzdCxcbiAgSVJlYWRDb250cmFjdFJlc3BvbnNlLFxuICBJUmVhZFN0YXRlUmVxdWVzdCxcbiAgSVJlYWRTdGF0ZVJlc3BvbnNlLFxuICBJUnBjTWV0aG9kLFxuICBJU2VuZEFjdGlvblJlcXVlc3QsXG4gIElTZW5kQWN0aW9uUmVzcG9uc2UsXG4gIElTdWdnZXN0R2FzUHJpY2VSZXF1ZXN0LFxuICBJU3VnZ2VzdEdhc1ByaWNlUmVzcG9uc2UsXG4gIFJlYWRTdGF0ZVJlcXVlc3QsXG4gIFNlbmRBY3Rpb25SZXNwb25zZVxufSBmcm9tIFwiLi90eXBlc1wiO1xuXG5pbXBvcnQge1xuICBFc3RpbWF0ZUdhc0ZvckFjdGlvblJlcXVlc3QsXG4gIEdldEFjY291bnRSZXF1ZXN0LFxuICBHZXRBY3Rpb25zUmVxdWVzdCxcbiAgR2V0QmxvY2tNZXRhc1JlcXVlc3QsXG4gIEdldENoYWluTWV0YVJlcXVlc3QsXG4gIEdldEVwb2NoTWV0YVJlcXVlc3QsXG4gIEdldFJlY2VpcHRCeUFjdGlvblJlcXVlc3QsXG4gIFJlYWRDb250cmFjdFJlcXVlc3QsXG4gIFNlbmRBY3Rpb25SZXF1ZXN0LFxuICBTdWdnZXN0R2FzUHJpY2VSZXF1ZXN0XG59IGZyb20gXCIuL3R5cGVzXCI7XG5cbnR5cGUgT3B0cyA9IHtcbiAgdGltZW91dD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJwY01ldGhvZCBpbXBsZW1lbnRzIElScGNNZXRob2Qge1xuICBwdWJsaWMgY2xpZW50OiBncnBjV2ViLkFQSVNlcnZpY2VQcm9taXNlQ2xpZW50O1xuICBwdWJsaWMgdGltZW91dDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGhvc3RuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IE9wdHMgPSB7fSkge1xuICAgIHRoaXMuY2xpZW50ID0gbmV3IGdycGNXZWIuQVBJU2VydmljZVByb21pc2VDbGllbnQoaG9zdG5hbWUsIG51bGwsIG51bGwpO1xuICAgIHRoaXMudGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCAzMDAwMDA7XG4gIH1cblxuICBwdWJsaWMgc2V0UHJvdmlkZXIocHJvdmlkZXI6IHN0cmluZyB8IElScGNNZXRob2QpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHByb3ZpZGVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLmNsaWVudCA9IG5ldyBncnBjV2ViLkFQSVNlcnZpY2VQcm9taXNlQ2xpZW50KHByb3ZpZGVyLCBudWxsLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgb3JpZ2luID0gcHJvdmlkZXIgYXMgUnBjTWV0aG9kO1xuICAgICAgdGhpcy5jbGllbnQgPSBvcmlnaW4uY2xpZW50O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXREZWFkbGluZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtuZXcgRGF0ZShEYXRlLm5vdygpICsgdGhpcy50aW1lb3V0KS5nZXRUaW1lKCl9YDtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRBY2NvdW50KFxuICAgIHJlcTogSUdldEFjY291bnRSZXF1ZXN0XG4gICk6IFByb21pc2U8SUdldEFjY291bnRSZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gR2V0QWNjb3VudFJlcXVlc3QudG8ocmVxKTtcbiAgICBjb25zdCBwYlJlc3AgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXRBY2NvdW50KHBiUmVxLCB7XG4gICAgICBkZWFkbGluZTogdGhpcy5nZXREZWFkbGluZSgpXG4gICAgfSk7XG4gICAgcmV0dXJuIEdldEFjY291bnRSZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRCbG9ja01ldGFzKFxuICAgIHJlcTogSUdldEJsb2NrTWV0YXNSZXF1ZXN0XG4gICk6IFByb21pc2U8SUdldEJsb2NrTWV0YXNSZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gR2V0QmxvY2tNZXRhc1JlcXVlc3QudG8ocmVxKTtcbiAgICBjb25zdCBwYlJlc3AgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXRCbG9ja01ldGFzKHBiUmVxLCB7XG4gICAgICBkZWFkbGluZTogdGhpcy5nZXREZWFkbGluZSgpXG4gICAgfSk7XG4gICAgcmV0dXJuIEdldEJsb2NrTWV0YXNSZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRDaGFpbk1ldGEoXG4gICAgcmVxOiBJR2V0Q2hhaW5NZXRhUmVxdWVzdFxuICApOiBQcm9taXNlPElHZXRDaGFpbk1ldGFSZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gR2V0Q2hhaW5NZXRhUmVxdWVzdC50byhyZXEpO1xuICAgIGNvbnN0IHBiUmVzcCA9IGF3YWl0IHRoaXMuY2xpZW50LmdldENoYWluTWV0YShwYlJlcSwge1xuICAgICAgZGVhZGxpbmU6IHRoaXMuZ2V0RGVhZGxpbmUoKVxuICAgIH0pO1xuICAgIHJldHVybiBHZXRDaGFpbk1ldGFSZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRTZXJ2ZXJNZXRhKFxuICAgIHJlcTogSUdldFNlcnZlck1ldGFSZXF1ZXN0XG4gICk6IFByb21pc2U8SUdldFNlcnZlck1ldGFSZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gR2V0U2VydmVyTWV0YVJlcXVlc3QudG8ocmVxKTtcbiAgICBjb25zdCBwYlJlc3AgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXRTZXJ2ZXJNZXRhKHBiUmVxLCB7XG4gICAgICBkZWFkbGluZTogdGhpcy5nZXREZWFkbGluZSgpXG4gICAgfSk7XG4gICAgcmV0dXJuIEdldFNlcnZlck1ldGFSZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRBY3Rpb25zKFxuICAgIHJlcTogSUdldEFjdGlvbnNSZXF1ZXN0XG4gICk6IFByb21pc2U8SUdldEFjdGlvbnNSZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gR2V0QWN0aW9uc1JlcXVlc3QudG8ocmVxKTtcbiAgICBjb25zdCBwYlJlc3AgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXRBY3Rpb25zKHBiUmVxLCB7XG4gICAgICBkZWFkbGluZTogdGhpcy5nZXREZWFkbGluZSgpXG4gICAgfSk7XG4gICAgcmV0dXJuIEdldEFjdGlvbnNSZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzdWdnZXN0R2FzUHJpY2UoXG4gICAgcmVxOiBJU3VnZ2VzdEdhc1ByaWNlUmVxdWVzdFxuICApOiBQcm9taXNlPElTdWdnZXN0R2FzUHJpY2VSZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gU3VnZ2VzdEdhc1ByaWNlUmVxdWVzdC50byhyZXEpO1xuICAgIGNvbnN0IHBiUmVzcCA9IGF3YWl0IHRoaXMuY2xpZW50LnN1Z2dlc3RHYXNQcmljZShwYlJlcSwge1xuICAgICAgZGVhZGxpbmU6IHRoaXMuZ2V0RGVhZGxpbmUoKVxuICAgIH0pO1xuICAgIHJldHVybiBTdWdnZXN0R2FzUHJpY2VSZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBlc3RpbWF0ZUdhc0ZvckFjdGlvbihcbiAgICByZXE6IElFc3RpbWF0ZUdhc0ZvckFjdGlvblJlcXVlc3RcbiAgKTogUHJvbWlzZTxJRXN0aW1hdGVHYXNGb3JBY3Rpb25SZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gRXN0aW1hdGVHYXNGb3JBY3Rpb25SZXF1ZXN0LnRvKHJlcSk7XG4gICAgY29uc3QgcGJSZXNwID0gYXdhaXQgdGhpcy5jbGllbnQuZXN0aW1hdGVHYXNGb3JBY3Rpb24ocGJSZXEsIHtcbiAgICAgIGRlYWRsaW5lOiB0aGlzLmdldERlYWRsaW5lKClcbiAgICB9KTtcbiAgICByZXR1cm4gRXN0aW1hdGVHYXNGb3JBY3Rpb25SZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZWFkU3RhdGUocmVxOiBJUmVhZFN0YXRlUmVxdWVzdCk6IFByb21pc2U8SVJlYWRTdGF0ZVJlc3BvbnNlPiB7XG4gICAgY29uc3QgcGJSZXEgPSBSZWFkU3RhdGVSZXF1ZXN0LnRvKHJlcSk7XG4gICAgY29uc3QgcGJSZXNwID0gYXdhaXQgdGhpcy5jbGllbnQucmVhZFN0YXRlKHBiUmVxLCB7XG4gICAgICBkZWFkbGluZTogdGhpcy5nZXREZWFkbGluZSgpXG4gICAgfSk7XG4gICAgcmV0dXJuIFJlYWRTdGF0ZVJlcXVlc3QuZnJvbShwYlJlc3ApO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlYWRDb250cmFjdChcbiAgICByZXE6IElSZWFkQ29udHJhY3RSZXF1ZXN0XG4gICk6IFByb21pc2U8SVJlYWRDb250cmFjdFJlc3BvbnNlPiB7XG4gICAgY29uc3QgcGJSZXEgPSBSZWFkQ29udHJhY3RSZXF1ZXN0LnRvKHJlcSk7XG4gICAgY29uc3QgcGJSZXNwID0gYXdhaXQgdGhpcy5jbGllbnQucmVhZENvbnRyYWN0KHBiUmVxLCB7XG4gICAgICBkZWFkbGluZTogdGhpcy5nZXREZWFkbGluZSgpXG4gICAgfSk7XG4gICAgcmV0dXJuIFJlYWRDb250cmFjdFJlcXVlc3QuZnJvbShwYlJlc3ApO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHNlbmRBY3Rpb24oXG4gICAgcmVxOiBJU2VuZEFjdGlvblJlcXVlc3RcbiAgKTogUHJvbWlzZTxJU2VuZEFjdGlvblJlc3BvbnNlPiB7XG4gICAgY29uc3QgcGJSZXEgPSBTZW5kQWN0aW9uUmVxdWVzdC50byhyZXEpO1xuICAgIGNvbnN0IHBiUmVzcCA9IGF3YWl0IHRoaXMuY2xpZW50LnNlbmRBY3Rpb24ocGJSZXEsIHtcbiAgICAgIGRlYWRsaW5lOiB0aGlzLmdldERlYWRsaW5lKClcbiAgICB9KTtcbiAgICByZXR1cm4gU2VuZEFjdGlvblJlc3BvbnNlLmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRSZWNlaXB0QnlBY3Rpb24oXG4gICAgcmVxOiBJR2V0UmVjZWlwdEJ5QWN0aW9uUmVxdWVzdFxuICApOiBQcm9taXNlPElHZXRSZWNlaXB0QnlBY3Rpb25SZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gR2V0UmVjZWlwdEJ5QWN0aW9uUmVxdWVzdC50byhyZXEpO1xuICAgIGNvbnN0IHBiUmVzcCA9IGF3YWl0IHRoaXMuY2xpZW50LmdldFJlY2VpcHRCeUFjdGlvbihwYlJlcSwge1xuICAgICAgZGVhZGxpbmU6IHRoaXMuZ2V0RGVhZGxpbmUoKVxuICAgIH0pO1xuICAgIHJldHVybiBHZXRSZWNlaXB0QnlBY3Rpb25SZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRFcG9jaE1ldGEoXG4gICAgcmVxOiBJR2V0RXBvY2hNZXRhUmVxdWVzdFxuICApOiBQcm9taXNlPElHZXRFcG9jaE1ldGFSZXNwb25zZT4ge1xuICAgIGNvbnN0IHBiUmVxID0gR2V0RXBvY2hNZXRhUmVxdWVzdC50byhyZXEpO1xuICAgIGNvbnN0IHBiUmVzcCA9IGF3YWl0IHRoaXMuY2xpZW50LmdldEVwb2NoTWV0YShwYlJlcSwge1xuICAgICAgZGVhZGxpbmU6IHRoaXMuZ2V0RGVhZGxpbmUoKVxuICAgIH0pO1xuICAgIHJldHVybiBHZXRFcG9jaE1ldGFSZXF1ZXN0LmZyb20ocGJSZXNwKTtcbiAgfVxufVxuIl19
